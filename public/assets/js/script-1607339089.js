var variantImageAutomator=function(){function e(e){var t=e||document;b=0==b?Object.keys(_)[0]:b;var a={};return document.location.search.substr(1).split("&").forEach(function(e){var t=e.split("=");try{a[t[0].toString()]=t[1].toString()}catch(r){}}),(isNaN(a.variant)?t.querySelector('form[action="/cart/add"] [name="id"]:checked')?t.querySelector('form[action="/cart/add"] [name="id"]:checked').value:t.querySelector('[name="id"]').value:a.variant?a.variant:t.querySelector("select option[value='"+b+"']").parentNode.value)||b}function t(){return document.location.search.indexOf("variant=")>=0}function a(a){a||(a=e());var r=y.hasOwnProperty(a)?y[a]:y[b];if(!r||0==r.length)return S;if(!c&&"no_action"!=d&&!t()){if(h=0,"showcase_only"==d)return y.g.length?y.g:T;if("showcase_and_variants"==d)return y.g.concat(T);if("featured_only"==d)return[S[0]];if("show_all"==d)return S}return"at_start"==q?r=y.g.concat(r):"at_end"==q&&(r=r.concat(y.g)),r}function r(e,t){return JSON.stringify(e)===JSON.stringify(t)}var o=!1,i=0,n="Ella",u=!1,c=!1,d="no_action",l="none",s="",p=window.location.href.toLowerCase().indexOf("/products_preview")>=0,m=window.location.href.toLowerCase().indexOf("/products/")>=0,f=(c="/"==window.location.pathname,0),h=0,v={};if(c?u=!0:(m||p)&&(u=!0),o)var w=setInterval(function(){window.$&&window.jQuery&&clearInterval(w)},10);if(u&&(c?("Startup"==n?s=document.querySelector('[data-section-type="featured-product"] .product-title a')?document.querySelector('[data-section-type="featured-product"] .product-title a').href:"":"Flow"==n?s=document.querySelector("#product-box .product-details--form-wrapper a")?document.querySelector("#product-box .product-details--form-wrapper a").href:"":"Debut"==n||"Success theme"==n||("Supply V2"==n?s=document.querySelector('[data-section-type="product-template"] a.full-details')?document.querySelector('[data-section-type="product-template"] a.full-details').href:"":"Launch"==n?s=document.querySelector(".home-featured-product .product-title a")?document.querySelector(".home-featured-product .product-title a").href:"":"Responsive"==n?s=document.querySelector(".featured-product-section .product_name a")?document.querySelector(".featured-product-section .product_name a").href:"":"Streamline"==n||"Broadcast"==n||("Palo Alto V2"==n?s=document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a')?document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a').href:"":"Empire V5"==n||"Empire V5.1"==n||("Startup V3"==n?s=document.querySelector(".product-title a")?document.querySelector(".product-title a").href:"":["Turbo","Turbo Seoul","Turbo Florence","Turbo Portland","Turbo Chicago","Turbo Dubai","Turbo Tennessee"].indexOf(n)>=0?s=document.querySelector(".product_section .product_name a")?document.querySelector(".product_section .product_name a").href:"":"Palo Alto V3"==n?s=document.querySelector('[data-section-type="featured-product"]:last-child .featured-product-title a')?document.querySelector('[data-section-type="featured-product"]:last-child .featured-product-title a').href:"":"Warehouse"==n?s=document.querySelector('[data-section-type="product"]:last-child .product-meta__title a')?document.querySelector('[data-section-type="product"]:last-child .product-meta__title a').href:"":"Flex"==n&&(s=document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a")?document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a").href:"")))),s=s.replace(/\/$/,"").split("?")[0].split("#")[0]):s=window.location.pathname.replace(/\/$/,""),s.length&&("undefined"==typeof window.via_product_handle||window.via_product_handle!=s))){var g;window.via_product_handle=s;var y={},_={};y.g=[];var S=[],b=0,q="at_end",T=[],k={},j=[];k.g=[];var x=[],O="",C=[],E=[],N=[],I=[];function D(e){j=e.media,e.variants.forEach(function(e){e.featured_image&&-1==C.indexOf(e.featured_image.id)&&(C.push(e.featured_image.id),T.push(e.featured_image)),e.featured_media&&-1==E.indexOf(e.featured_media.id)&&(E.push(e.featured_media.id),x.push(e.featured_media)),!b&&e.available&&(b=e.id),e.featured_media&&(N[e.featured_media.id]||(N[e.featured_media.id]=[]),N[e.featured_media.id].push(e.id)),k[e.id]=[],e.featured_image&&(I[e.featured_image.id]||(I[e.featured_image.id]=[]),I[e.featured_image.id].push(e.id)),y[e.id]=[],_[e.id]=e});var t=!0,a=[];j.forEach(function(e,r){t&&-1==E.indexOf(e.id)?i>0&&r<i||k.g.push(e):(t=!1,(a=N[e.id]?N[e.id]:a).forEach(function(t){k[t].push(e)}))})}function L(e){var t=!0,a=[];(S=e).forEach(function(e,r){t&&-1==C.indexOf(e.id)?i>0&&r<i||y.g.push(e):(t=!1,(a=I[e.id]?I[e.id]:a).forEach(function(t){y[t].push(e)}))})}function z(){return"include_selected"==l&&0==/via_enabled|viaenabled|__via_enabled/.test(O.toLowerCase())||"exclude_selected"==l&&1==/via_disabled|viadisabled|__via_disabled/.test(O.toLowerCase())}function J(e){var t=4,a=200,r=new XMLHttpRequest;return r.open("GET",s+".js",!0),r.send(),r.onreadystatechange=function(){if(r.readyState===t&&r.status===a){if(g=JSON.parse(r.responseText),O=g.tags.join(),("undefined"==typeof g.media||0==g.media.length)&&0==g.images.length)return;D(g);var o=new XMLHttpRequest;o.open("GET",s+".json",!0),o.send(),o.onreadystatechange=function(){o.readyState===t&&(o.status===a&&(L(JSON.parse(o.responseText).product.images),e()))}}},!0}function P(){O=g.tags.join(),D(g),L(g.product_images),A()}function V(){if(p)try{g=JSON.parse(document.querySelector("[sa-product-json]").innerText),P()}catch(e){setTimeout(function(){V()},100)}else document.querySelector("[sa-product-json]")&&(g=JSON.parse(document.querySelector("[sa-product-json]").innerText)).media&&P();g&&g.media||J(A)}function A(){if(!z())var t=setInterval(function(){if(("interactive"==document.readyState||"complete"==document.readyState)&&"undefined"!=typeof $){clearInterval(t),$("body").append("<div id='multi-variant-info' style='display:none'></div>"),$("body").append("<div id='multi-variant-thumb' style='display:none'></div>");var o=!1;$("#more-view-carousel").length?($("#more-view-carousel li.grid-item").each(function(e,t){$(t).attr("data-image-id",S[e].id)}),$("#multi-variant-info").html($("#more-view-carousel").html())):$(".picture-product").length&&(o=!0,$(".picture-product .item-picture:not(.slick-cloned)").each(function(e,t){$(t).attr("data-image-id",S[e].id),$(".picture-thumbnails .item-thumbnails:not(.slick-cloned)").eq(e).attr("data-image-id",S[e].id)}),$("#multi-variant-info").html($(".picture-product").html()),$("#multi-variant-thumb").html($(".picture-thumbnails").html()));var i=setInterval(function(){$.fn.owlCarousel&&(clearInterval(i),$("body").on("change click","select, .single-option-selector, label",function(){setTimeout(function(){f=e(),h!=f&&(n(f),h=f)},100)}),n())},10);function n(e){if(variant_images=a(e),!r(v,variant_images)){v=variant_images;var t="",i="";if($.each(variant_images,function(e,a){t+=$("#multi-variant-info [data-image-id='"+a.id+"']").clone().wrap("<div></div>").parent().html(),i+=$("#multi-variant-thumb [data-image-id='"+a.id+"']").clone().wrap("<div></div>").parent().html()}),0==o){if($(".more-view-wrapper-owlslider ul").length||$(".more-view-wrapper ul").length){try{$(".more-view-wrapper-owlslider ul").owlCarousel("destroy")}catch(l){}try{$(".more-view-wrapper-owlslider ul").data("owlCarousel").destroy()}catch(l){}try{$("#more-view-carousel").data("owlCarousel").destroy()}catch(l){}$("#more-view-carousel").html(t)}else $(".more-view-wrapper-jcarousel").length&&(t='<ul id="more-view-carousel" class="product-photo-thumbs jcarousel-skin-tango">'+t+"</ul>",$(".more-view-wrapper-jcarousel").html(t));$(".more-view-wrapper-owlslider").length||$(".more-view-wrapper ul").length?$("#more-view-carousel").owlCarousel({navigation:!0,items:5,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,3],itemsTabletSmall:[540,3],itemsMobile:[360,3]}).css("visibility","visible"):$(".more-view-wrapper-jcarousel").length&&($(".more-view-wrapper-jcarousel ul").jcarousel({vertical:!0}).css("visibility","visible"),$(".product-img-box").addClass("has-jcarousel"),$(".more-view-wrapper").css("visibility","visible")),$("#more-view-carousel .grid-item a").off("click").on("click",function(e){e.preventDefault();var t=$(this).attr("data-image");$("#product-featured-image").attr({src:t}),$("#product-featured-image").attr("data-zoom-image",$(this).data("zoom-image"));var a=$("#product-featured-image").data("elevateZoom");return a&&a.swaptheimage(t,$(this).data("zoom-image")),!1}),$(window).width()<768&&$(".product-photo-container a").on("click",function(e){return e.preventDefault(),!1}),setTimeout(function(){$("#more-view-carousel li.grid-item:first a").trigger("click")},100)}else{var n=$(".product-photo-container .picture-product"),d=$(".product-thumbnails .picture-thumbnails");n.slick("unslick"),d.slick("unslick"),n.html(t),d.html(i),u(n,d),c()}}}function u(e,t){e.slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:t}),t.slick({slidesToShow:$(".product-photo-container").data("item"),slidesToScroll:1,asNavFor:e,dots:!1,focusOnSelect:!0,verticalSwiping:$(".product-photo-container").data("moreview"),vertical:$(".product-photo-container").data("moreview")})}function c(){if($.fn.elevateZoom){$(".zoomContainer").remove(),$(".product-featured-image").removeData("elevateZoom");var e=setInterval(function(){if($(".zoomWrapper").length)$(".zoomWrapper img").unwrap();else{clearInterval(e);var t={cursor:"pointer",galleryActiveClass:"active",imageCrossfade:!0,scrollZoom:!0};$(".picture-product .product-featured-image").length>0&&$(window).innerWidth()>1025&&$(".picture-product .product-featured-image").elevateZoom(t)}},10)}}}},10)}V()}};variantImageAutomator();